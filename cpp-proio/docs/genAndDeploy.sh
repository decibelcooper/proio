#!/bin/bash

git clone https://git@${CPP_DOCS_REPO_REF} html

rm -rf html/*

doxygen Doxyfile

if [ $? -ne 0 ]; then
    exit $?
fi

touch html/.nojekyll

cd html

git add --all
git commit -m "Autogenerated via decibelcooper/proio Travis CI build: ${TRAVIS_BUILD_NUMBER}" -m "Commit: ${TRAVIS_COMMIT}"
git push --force "https://${CPP_DOCS_REPO_TOKEN}@${CPP_DOCS_REPO_REF}"

exit $?
